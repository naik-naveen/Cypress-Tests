describe('Assets feature Test', () => {
    const un = Cypress.env('USERNAME')
    const pwd = Cypress.env('PASSWORD')
    beforeEach(() => {
        cy.assets_login(un, pwd)
    })
    it('should navigate to assets page successfully ', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.url().should('include', '/assets')
        cy.get('i[title="Add checklist"]').should('exist')
        cy.get('i[title="Add asset"]').should('exist')
        cy.get('i[title="Search / Edit asset"]').should('exist')
        cy.get('i[title="Search/Edit checklist"]').should('exist')
        cy.contains('Assets Count').should('be.visible')
        cy.contains('Digital Assets').should('be.visible')
    })
    it('When user click on asset add link, should navigate to assets/add page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('i[title="Add asset"]').click()
        cy.url().should('include', '/add')
        cy.get('.form-group').contains('label', 'Tracking Id').next('div').find('input[placeholder="Tracking Id"]').should('exist')
        cy.get('.form-group').contains('label', 'Location').next('div').find('input[placeholder="Location"]').should('exist')
        cy.get('button[class="btn btn-xs btn-success pull-right"]').should('exist').and('have.text', 'Save').should('be.enabled')
    })
    it('When user enter all input in textfields of assets/add page and click on save button', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('i[title="Add asset"]').click()
        cy.get('input[placeholder="Tracking Id"]').type(Cypress.env('TRACKING ID'))
        cy.get('input[placeholder="Location"]').type(Cypress.env('LOCATION'))
        cy.get('button[class="btn btn-xs btn-success pull-right"]').click()
        cy.screenshot()
    })
    it('When user click on asset manage link, should navigate to assets/manage page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/assets/manage"]').click()
        cy.url().should('include', '/assets/manage')
        cy.get('input[placeholder="Search"]').should('exist')
        cy.get('a:contains(Add New Asset)').should('be.visible')
    })
    it('When user click on Add New Asset link, should navigate to assets/add page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/assets/manage"]').click()
        cy.get('a:contains(Add New Asset)').click()
        cy.url().should('include', '/assets/add')
        cy.get('input[placeholder="Tracking Id"]').type(Cypress.env('TRACKING ID'))
        cy.get('input[placeholder="Location"]').type(Cypress.env('LOCATION'))
        cy.get('button[class="btn btn-xs btn-success pull-right"]').click()
    })
    it('When user click on checklist add link, should navigate to /checklist/add page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/checklist/add"]').click()
        cy.url().should('include', '/checklist/add')
        cy.get('.form-group').contains('label', 'Title').next('div').find('input[name="title"]').should('exist')
        cy.get('div.form-group input[type="text"]').should('exist')
        cy.get('button[class="btn btn-xs btn-success pull-right"]').should('exist').and('have.text', 'Save').should('be.enabled')
    })
    it('When user click on checklist manage link, should navigate to checklist manage page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/checklist/manage"]').click()
        cy.url().should('include', '/checklist/manage')
        cy.get('a:contains(Add New Checklist)').should('be.visible')
    })
    it('When user click on Add new Checklist link, should navigate to checklist add page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/checklist/manage"]').click()
        cy.get('a:contains(Add New Checklist)').click()
        cy.url().should('include', '/checklist/add')
        cy.get('div.form-group input[type="text"]').should('exist')
        cy.get('button[class="btn btn-xs btn-success pull-right"]').should('exist').and('have.text', 'Save').should('be.enabled')
    })
    it('When user click on Location wise assets report  link, should navigate to locationwiseReport page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a:contains(Location wise assets report )').click()
        cy.url().should('include', '/locationwiseReport')
        cy.get('button[title="Download As PDF"]').should('exist')
        cy.get('button[title="Print"]').should('exist')
        cy.contains('Print Options').should('be.visible')
        cy.contains('Report Header').prev('input[type="checkbox"]').should('exist')
        cy.contains('Page Header').prev('input[type="checkbox"]').should('exist')
        cy.contains('Page Header On Each Page').prev('input[type="checkbox"]').should('exist')
        cy.contains('Report Footer').prev('input[type="checkbox"]').should('exist')
        cy.contains('Page Footer').prev('input[type="checkbox"]').should('exist')
        cy.contains('Page Footer On Each Page').prev('input[type="checkbox"]').should('exist')
        cy.contains('Page Border').prev('input[type="checkbox"]').should('exist')
        cy.contains('span', 'Records Per Page :').siblings('input[name="pagesize"]').should('exist')
    })
    it('When user click on tracking id, should navigate to assets/edit page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/assets/manage"]').click()
        cy.contains('tr', 'room 1').contains('a', '123').click()
        cy.url().should('include', '/assets/edit')
        cy.get('div.panel-heading').contains('TrackingId').should('exist').parent().find('button:contains(Update)').should('exist')
        cy.get('input[name="trackingId"]').should('exist')
        cy.get('div.panel-heading').contains('Location').should('exist').parent().find('button:contains(Update)').should('exist')
        cy.get('input[name="location"]').should('exist')
        cy.get('div.panel-heading').contains('Tags ').should('exist').parent().find('button:contains(Update)').should('exist')
        cy.get('input[placeholder="tags"]').should('exist')
        cy.get('div.panel-heading').contains('Value').should('exist').parent().find('button:contains(Update)').should('exist')
        cy.get('input[name="value"]').should('exist')
    })
    it('Maintance link should be visible and enable in checklist/manage page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/checklist/manage"]').click()
        cy.contains('Maintenance').should('be.visible').should('not.be.disabled')
       // cy.get('a:contains(Maintenance)').should('be.visible')
    })
    it('Delete link should be visible in checklist/manage page', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/checklist/manage"]').click()
        cy.contains('Delete').should('be.visible')
    })
    it('Verify back button in Add new asset Asset feature', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/assets/add"]').click()    
        cy.url().should('eq', Cypress.config().baseUrl + '/assets/add')  
        cy.click_Back_Button()  
        cy.url().should('eq', Cypress.config().baseUrl + '/assets')        
        cy.get('a[href="/assets/manage"]').click() 
        cy.url().should('eq', Cypress.config().baseUrl + '/assets/manage') 
        cy.get('a:contains(Add New Asset)').click()         
        cy.url().should('eq', Cypress.config().baseUrl + '/assets/add')       
        cy.click_Back_Button()
        cy.url().should('eq', Cypress.config().baseUrl + '/assets/manage') 
        cy.click_Back_Button()  
        cy.url().should('eq', Cypress.config().baseUrl + '/assets')
      })
      it('Verify back button in Asset edit feature', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click() 
        cy.get('a[href="/assets/manage"]').click() 
        cy.get('th:contains(Tracking Id)').parents('thead').next('tbody').children('tr').first().find('a:contains(123)').click() 
        cy.url().should('eq', Cypress.config().baseUrl + '/assets/edit') 
        cy.url().should('eq', Cypress.config().baseUrl + '/assets/manage') 
        cy.click_Back_Button()  
        cy.url().should('eq', Cypress.config().baseUrl + '/assets')
      })
      it('Verify back button in Checklist feature', () => {
        cy.visit('/')
        cy.get('a[href="/assets"]').click()
        cy.get('a[href="/checklist/add"]').click()    
        cy.url().should('eq', Cypress.config().baseUrl + '/checklist/add')  
        cy.click_Back_Button()  
        cy.url().should('eq', Cypress.config().baseUrl + '/assets')        
        cy.get('a[href="/checklist/manage"]').click() 
        cy.url().should('eq', Cypress.config().baseUrl + '/checklist/manage') 
        cy.get('a:contains(Add New Checklist)').click()         
        cy.url().should('eq', Cypress.config().baseUrl + '/checklist/add')       
        cy.click_Back_Button()
        cy.url().should('eq', Cypress.config().baseUrl + '/checklist/manage') 
        cy.click_Back_Button()  
        cy.url().should('eq', Cypress.config().baseUrl + '/assets')
      })
})